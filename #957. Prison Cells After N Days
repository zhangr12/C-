class Solution {
public:
    vector<int> prisonAfterNDays(vector<int>& cells, int N) {
        // find the loop
        unordered_set<string> s;
        vector<vector<int>> m;
        while(true){
            // update cells
            vector<int> tempcells(8, 0);
            for(int j = 1; j <7; j++){
                if(cells[j-1] == cells[j+1]) tempcells[j] = 1;
            }
            cells = tempcells;
            string temp = "";
            for(int j = 0; j < 8; j++) temp += to_string(cells[j]);
            if(s.count(temp)) break;
            s.insert(temp);
            m.push_back(cells);
        }
        return m[(N-1)%(int)m.size()];
    }
};
